<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login && Sign</title>
    <link rel="stylesheet" href="./css/style.css">
    <script src = "./js/Bmob-2.4.0.min.js"></script>
    <script>
        Bmob.initialize("83f1411ff91fab7d", "000000");
        Bmob.debug(true);
        function login() {
            Bmob.User.login(document.getElementById("uname").value, document.getElementById("pword").value).then(res => {
                console.log(res);
            }).catch(err => {
                alert(err.error);
            });
        }
        function resset() {
            let current = Bmob.User.current()
            let objectId = current.objectId
            let data = {
                oldPassword: document.getElementById("oldPassword").value,
                newPassword: document.getElementById("newPassword").value,
            }
            Bmob.updateUserPassword(objectId,data).then(res => {
                location.href = "index.html";
            }).catch(err => {
                console.log(err)
            })
        }
    </script>
</head>
<body>
    <div class = "container" id = "container">
        <!-- 重置密码 -->
        <div class = "form_container sign_up_container">
            <form action = "#">
                <h1>重置密码</h1>
                <input type="text" id = "oldPassword" placeholder = "旧密码">
                <input type="text" id = "newPassword" placeholder = "新密码">
                <button onclick = "resset()">重置</button>
            </form>
        </div>
        <!-- 登陆 -->
        <div class = "form_container login_in_container">
            <form action = "#">
                <h1>登陆后方可修改密码</h1>
                <h1>用户登陆</h1>
                <input type="text" id = "uname" placeholder = "用户名">
                <input type="password" id = "pword" placeholder = "密码">
                <button onclick = "login()">登陆</button>
            </form>
        </div>
        <!-- 侧边栏 -->
        <div class = "overlay_container">
            <div class = "overlay">
                <div class = "overlay_transiation overlay_left">
                    <h1>已有账号?</h1>
                    <p>快点击我去进行登陆吧!</p>
                    <button class = "ghost", id = "Login" onclick = "window.open('index.html')">登陆</button>
                </div>
                <div class = "overlay_transiation overlay_right">
                    <h1>已经登陆?</h1>
                    <p>快点击我去进行重置吧!</p>
                    <button class = "ghost", id = "Sign" >重置密码</button>
                </div>
            <div>
        </div>
    </div>
<script src = "./js/index.js"></script>
</body>
</html>
        